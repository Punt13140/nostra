<div {{ attributes }}>
    <form
            data-action="live#action"
            data-action-name="prevent|saveOrder"
    >
        {#        <div class="row align-items-center"> #}
        {#            <div class="col-2"> #}
        {#                <label for="order-orderedAt">Date:</label> #}
        {#            </div> #}
        {#            <div class="col-3"> #}
        {#                <input #}
        {#                        type="date" #}
        {#                        data-model="orderedAt" #}
        {#                        class="form-control {{ _errors.has('orderedAt') ? 'is-invalid' }}" #}
        {#                        id="order-orderedAt" #}
        {#                > #}
        {#                {% if _errors.has('orderedAt') %} #}
        {#                    <div class="invalid-feedback"> #}
        {#                        {{ _errors.get('orderedAt') }} #}
        {#                    </div> #}
        {#                {% endif %} #}
        {#            </div> #}
        {#        </div> #}


        {#        <div class="mb-3"> #}
        {#            <label class="form-label" for="order-client">Client</label> #}
        {#            <div class="row align-items-center"> #}
        {#                <div class="col-3"> #}
        {#                    <select #}
        {#                            data-model="client" #}
        {#                            id="order-client" #}
        {#                            class="form-control form-select {{ _errors.has('client') ? 'is-invalid' }}"> #}
        {#                        <option value="">Choisir un client</option> #}
        {#                        {% for clientOption in clients %} #}
        {#                            <option value="{{ clientOption.id }}" {{ this.isCurrentClient(clientOption) ? 'selected' }}>{{ clientOption.fullName }}</option> #}
        {#                        {% endfor %} #}
        {#                    </select> #}
        {#                </div> #}
        {#                <div class="col-auto"> #}
        {#                    <div class="form-text"> #}
        {#                        <a #}
        {#                                type="button" #}
        {#                                data-bs-toggle="modal" #}
        {#                                data-bs-target="#new-client-modal" #}
        {#                        >+ Nouveau client #}
        {#                        </a> #}
        {#                    </div> #}
        {#                </div> #}
        {#            </div> #}
        {#            {% if _errors.has('client') %} #}
        {#                <div class="invalid-feedback"> #}
        {#                    {{ _errors.get('client') }} #}
        {#                </div> #}
        {#            {% endif %} #}
        {#        </div> #}

        <div class="row g-3align-items-center mb-3">
            <div class="col-auto">
                <label class="col-form-label" for="order-client">Client</label>
            </div>
            <div class="col-auto">
                <select
                        data-model="client"
                        id="order-client"
                        class="form-control form-select {{ _errors.has('client') ? 'is-invalid' }}">
                    <option value="">Choisir un client</option>
                    {% for clientOption in clients %}
                        <option value="{{ clientOption.id }}" {{ this.isCurrentClient(clientOption) ? 'selected' }}>{{ clientOption.fullName }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-auto">
                <div class="form-text">
                    <a
                            type="button"
                            data-bs-toggle="modal"
                            data-bs-target="#new-client-modal"
                    >+ Nouveau client
                    </a>
                </div>
            </div>
        </div>

        <div class="mb-3">
            <label for="order-designation" class="form-label">Détail</label>
            <textarea
                    class="form-control"
                    id="order-designation"
                    data-model="designation"
                    name="designation"
                    rows="5">
                </textarea>
            {% if _errors.has('designation') %}
                <div class="invalid-feedback">
                    {{ _errors.get('designation') }}
                </div>
            {% endif %}
        </div>

        <div class="row g-3 align-items-center mb-3">
            <div class="col-auto">
                <label for="order-itemCount" class="col-form-label">Nombre d'objets</label>
            </div>
            <div class="col-auto">
                <input
                        type="number"
                        data-model="itemCount"
                        class="form-control {{ _errors.has('itemCount') ? 'is-invalid' }}"
                        id="order-itemCount"
                >
                {% if _errors.has('itemCount') %}
                    <div class="invalid-feedback">
                        {{ _errors.get('itemCount') }}
                    </div>
                {% endif %}
            </div>
        </div>

        <div class="row g-3 align-items-center mb-3">
            <div class="col-auto">
                <label for="order-refId" class="col-form-label">N° d'ordre ou référence</label>
            </div>
            <div class="col-auto">
                <input
                        type="number"
                        data-model="refId"
                        class="form-control {{ _errors.has('refId') ? 'is-invalid' }}"
                        id="order-refId"
                >
                {% if _errors.has('refId') %}
                    <div class="invalid-feedback">
                        {{ _errors.get('refId') }}
                    </div>
                {% endif %}
            </div>
        </div>
        <div class="mt-3">
            <button type="submit" class="btn btn-primary">Valider</button>
        </div>
    </form>

    {% component BootstrapModal with {id: 'new-client-modal'} %}
        {% block modal_header %}
            <h5>Add a client</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        {% endblock %}
        {% block modal_body %}
            <twig:NewClientForm/>
        {% endblock %}
    {% endcomponent %}
</div>
